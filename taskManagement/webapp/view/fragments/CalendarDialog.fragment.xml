<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:unified="sap.ui.unified"
>
    <Popover
        title="{calendarModel>/title}"
        placement="Auto"
        contentWidth="600px"
        contentHeight="500px"
        modal="false"
    >
        <content>
            <VBox class="sapUiSmallMargin">
                <Text
                    text="Unavailable dates are highlighted in red"
                    class="sapUiSmallMarginBottom"
                />
                
                <unified:Calendar
                    id="availabilityCalendar"
                    width="100%"
                    class="sapUiSmallMarginBottom"
                    specialDates="{calendarModel>/availabilities}"
                >
                    <unified:specialDates>
                        <unified:DateTypeRange
                            startDate="{calendarModel>startDate}"
                            endDate="{calendarModel>endDate}"
                            type="Type01"
                            tooltip="{calendarModel>reason}"
                        />
                    </unified:specialDates>
                </unified:Calendar>

                <Panel
                    headerText="Unavailability Details"
                    expandable="true"
                    expanded="true"
                >
                    <List
                        items="{calendarModel>/availabilities}"
                        noDataText="No unavailable dates"
                    >
                        <StandardListItem
                            title="{path: 'calendarModel>startDate', formatter: '.formatter.formatDate'} - {path: 'calendarModel>endDate', formatter: '.formatter.formatDate'}"
                            description="{calendarModel>reason}"
                            icon="sap-icon://calendar"
                            iconDensityAware="false"
                            iconInset="false"
                        />
                    </List>
                </Panel>
            </VBox>
        </content>
        <footer>
            <Toolbar>
                <ToolbarSpacer />
                <Button
                    text="Close"
                    press="onCloseCalendar"
                />
            </Toolbar>
        </footer>
    </Popover>
</core:FragmentDefinition>

